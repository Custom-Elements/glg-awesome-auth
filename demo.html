<!doctype html>

<html>
  <head>
    <title>glg-awesome-auth</title>
    <script src="http://localhost:35729/livereload.js"></script>
    <script src="node_modules/polymer/platform.js"></script>
    <link rel="import" href="node_modules/polymer/polymer.html">
    <link rel="import" href="build/glg-awesome-auth.html">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
    <style>
      body {
        font-family: "Helvetica Neue", "Helvetica", Arial;
      }
    </style>
  </head>
  <body unresolved>
    <div id="holder">
      <glg-awesome-auth appName="glg-internal-app"
                        emailFrom="khughes@glgroup.com"
                        emailSubject="Welcome to GLG Mobile!"
                        friendlyAppName="GLG Mobile"
                        confirmationRedirect="http://localhost:10000/demo.html">

          <button id="btn" onclick="logout()">Logout</button>
          <div>
              You are now logged in <span id="personalDetails"></span>!
          </div>
      </glg-awesome-auth>
    </div>
    <script>
      document.addEventListener('polymer-ready', function() {
      })

      var awesomeAuth = document.querySelector("glg-awesome-auth");

      function logout() {
          awesomeAuth.logout();
      }

        awesomeAuth.addEventListener('glg-awesome-auth-login', function(event){
            var user = event.detail.user
            console.log("The user is ", user)
            var details = document.getElementById('personalDetails');
            details.innerText = user.currentUser.rmFirstName + ' ' + user.currentUser.rmLastName;
        })
    </script>
  </body>
</html>
